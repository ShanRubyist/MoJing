<div id="app">
  <a-row>
    <a-col :md="4"></a-col>

    <a-col :sm="24" :md="16">
      <!--二级导航-->
      <a-tabs id="nav-tab" default-active-key="3" @change="change_tab">
        <a-tab-pane key="1">
          <span slot="tab">
            <i class="fa fa-newspaper-o"></i>&nbsp;最新动态
          </span>
          <a-empty>
            <a-button type="primary">
              去订阅
            </a-button>
          </a-empty>
          <!--        <new-feeds v-if="current[0] == 'new_feeds'"></new-feeds>-->
        </a-tab-pane>

        <a-tab-pane key="2">
          <span slot="tab">
            <i class="fa fa-rss"></i>&nbsp;RSS
          </span>
          <rss-list></rss-list>
        </a-tab-pane>

        <a-tab-pane key="3">
          <span slot="tab">
            <i class="fa fa-shopping-cart"></i>&nbsp;店铺监控
          </span>
          <shop-list></shop-list>
        </a-tab-pane>

      </a-tabs>
    </a-col>

    <a-col :md="4"></a-col>
  </a-row>

  <a-back-top visibilityHeight="100px"/>
</div>

<script>
    <%= render "home/rss/rss_list.vue.js" %>
    <%= render "home/shop_spy/shop_list.vue.js" %>

    var app = new Vue({
        el: '#app',
        data: {},
        methods: {
            change_tab: function(key) {
                if(key == 2) {
                    $.ajax({
                        url: window.location.href + 'mark_readed',
                        dataType: "script",
                        type: "PUT",
                        data: {
                            user_id: <%= current_user.id %>,
                            authenticity_token: $('meta[name="csrf-token"]').attr('content')
                        }
                    })
                }
            }
        },
        mounted: function () {
            window.addEventListener('scroll', this.handleScroll);
        }
    })
</script>
