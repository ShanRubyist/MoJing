<script>
  <%= render 'vue_components/add_dialog.vue.js' %>

    var app = new Vue({
    el: '#app',
    data: {
    dialog_visible: false,
    unread_count: 0,
    cat_wrapper_visible: true,
    rss_list_json:
    <% rst = @rss_list.map do |rss| %>
    <% {
           title: rss.title,
           description: Loofah.fragment(rss.description).scrub!(:escape).to_html,
           pub_date: rss.pub_date.nil? ? '' : rss.pub_date.localtime.strftime("%Y-%m-%d %H:%M"),
           author: rss.author,
           link: rss.link,
           rss: rss.rss_probe_history.title,
           rss_link: rss.rss_probe_history.link,
           rss_description: rss.rss_probe_history.description,
           status: rss.user_rss_feed_ships.first.unread
       }
    %>
    <% end %>
    <%= raw(rst.to_json) %>,
    current_article: <%= raw(@rss_list.first.to_json) %>,

},
    methods: {
    show_add_dialog: function () {
    // 需要先置为 false，再设置为 true 才能再次显示添加的对话框
    this.dialog_visible = false;
    this.dialog_visible = true;
},
    toggle_cat_wrapper: function() {
        this.cat_wrapper_visible = !this.cat_wrapper_visible
},
    change_article: function(article){
        this.current_article = article
}
},
    mounted: function () {
}
})
</script>
